{"ast":null,"code":"const knapsack = (items, capacity) => {\n  const n = items.length;\n\n  // Ordena os itens por valor em ordem decrescente\n  items.sort((a, b) => b.value - a.value);\n  const table = Array.from({\n    length: n + 1\n  }, () => Array(capacity + 1).fill(0));\n  for (let i = 1; i <= n; i++) {\n    const {\n      weight,\n      value,\n      count = 1\n    } = items[i - 1];\n    const temp = {\n      ...items[i - 1]\n    };\n    for (let j = 1; j <= capacity; j++) {\n      let maxVal = table[i - 1][j];\n      let qtd = count;\n      while (qtd > 0 && weight * qtd <= j) {\n        const newVal = table[i - 1][j - weight * qtd] + value * qtd;\n        if (newVal > maxVal) {\n          maxVal = newVal;\n          temp.count = qtd;\n        }\n        qtd--;\n      }\n      table[i][j] = maxVal;\n    }\n    items[i - 1] = temp;\n  }\n  const result = [];\n  let i = n;\n  let j = capacity;\n  while (i > 0 && j > 0) {\n    const {\n      weight,\n      value,\n      count\n    } = items[i - 1];\n    if (table[i][j] !== table[i - 1][j]) {\n      result.push({\n        ...items[i - 1]\n      });\n      j -= weight * count;\n    } else if (table[i][j] === table[i - 1][j] && count >= 1) {\n      result.push({\n        ...items[i - 1],\n        count: 0\n      });\n    }\n    i -= 1;\n  }\n  return result.reverse();\n};\nexport default knapsack;","map":{"version":3,"names":["knapsack","items","capacity","n","length","sort","a","b","value","table","Array","from","fill","i","weight","count","temp","j","maxVal","qtd","newVal","result","push","reverse"],"sources":["/home/isaac/myProjects/dofus-doploons/dooplons-front/src/functions/knapsack.js"],"sourcesContent":["const knapsack = (items, capacity) => {\n  const n = items.length;\n\n  // Ordena os itens por valor em ordem decrescente\n  items.sort((a, b) => b.value - a.value);\n\n  const table = Array.from({ length: n + 1 }, () =>\n    Array(capacity + 1).fill(0)\n  );\n\n  for (let i = 1; i <= n; i++) {\n    const { weight, value, count = 1 } = items[i - 1];\n    const temp = { ...items[i - 1] };\n\n    for (let j = 1; j <= capacity; j++) {\n      let maxVal = table[i - 1][j];\n      let qtd = count;\n      while (qtd > 0 && weight * qtd <= j) {\n        const newVal = table[i - 1][j - weight * qtd] + value * qtd;\n        if (newVal > maxVal) {\n          maxVal = newVal;\n          temp.count = qtd;\n        }\n        qtd--;\n      }\n      table[i][j] = maxVal;\n    }\n    items[i - 1] = temp;\n  }\n\n  const result = [];\n  let i = n;\n  let j = capacity;\n  while (i > 0 && j > 0) {\n    const { weight, value, count } = items[i - 1];\n    if (table[i][j] !== table[i - 1][j]) {\n      result.push({ ...items[i - 1] });\n      j -= weight * count;\n    } else if (table[i][j] === table[i - 1][j] && count >= 1) {\n      result.push({ ...items[i - 1], count: 0 });\n    }\n    i -= 1;\n  }\n\n  return result.reverse();\n};\n\nexport default knapsack;\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGA,CAACC,KAAK,EAAEC,QAAQ,KAAK;EACpC,MAAMC,CAAC,GAAGF,KAAK,CAACG,MAAM;;EAEtB;EACAH,KAAK,CAACI,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAACC,KAAK,GAAGF,CAAC,CAACE,KAAK,CAAC;EAEvC,MAAMC,KAAK,GAAGC,KAAK,CAACC,IAAI,CAAC;IAAEP,MAAM,EAAED,CAAC,GAAG;EAAE,CAAC,EAAE,MAC1CO,KAAK,CAACR,QAAQ,GAAG,CAAC,CAAC,CAACU,IAAI,CAAC,CAAC,CAAC,CAC5B;EAED,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAIV,CAAC,EAAEU,CAAC,EAAE,EAAE;IAC3B,MAAM;MAAEC,MAAM;MAAEN,KAAK;MAAEO,KAAK,GAAG;IAAE,CAAC,GAAGd,KAAK,CAACY,CAAC,GAAG,CAAC,CAAC;IACjD,MAAMG,IAAI,GAAG;MAAE,GAAGf,KAAK,CAACY,CAAC,GAAG,CAAC;IAAE,CAAC;IAEhC,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAIf,QAAQ,EAAEe,CAAC,EAAE,EAAE;MAClC,IAAIC,MAAM,GAAGT,KAAK,CAACI,CAAC,GAAG,CAAC,CAAC,CAACI,CAAC,CAAC;MAC5B,IAAIE,GAAG,GAAGJ,KAAK;MACf,OAAOI,GAAG,GAAG,CAAC,IAAIL,MAAM,GAAGK,GAAG,IAAIF,CAAC,EAAE;QACnC,MAAMG,MAAM,GAAGX,KAAK,CAACI,CAAC,GAAG,CAAC,CAAC,CAACI,CAAC,GAAGH,MAAM,GAAGK,GAAG,CAAC,GAAGX,KAAK,GAAGW,GAAG;QAC3D,IAAIC,MAAM,GAAGF,MAAM,EAAE;UACnBA,MAAM,GAAGE,MAAM;UACfJ,IAAI,CAACD,KAAK,GAAGI,GAAG;QAClB;QACAA,GAAG,EAAE;MACP;MACAV,KAAK,CAACI,CAAC,CAAC,CAACI,CAAC,CAAC,GAAGC,MAAM;IACtB;IACAjB,KAAK,CAACY,CAAC,GAAG,CAAC,CAAC,GAAGG,IAAI;EACrB;EAEA,MAAMK,MAAM,GAAG,EAAE;EACjB,IAAIR,CAAC,GAAGV,CAAC;EACT,IAAIc,CAAC,GAAGf,QAAQ;EAChB,OAAOW,CAAC,GAAG,CAAC,IAAII,CAAC,GAAG,CAAC,EAAE;IACrB,MAAM;MAAEH,MAAM;MAAEN,KAAK;MAAEO;IAAM,CAAC,GAAGd,KAAK,CAACY,CAAC,GAAG,CAAC,CAAC;IAC7C,IAAIJ,KAAK,CAACI,CAAC,CAAC,CAACI,CAAC,CAAC,KAAKR,KAAK,CAACI,CAAC,GAAG,CAAC,CAAC,CAACI,CAAC,CAAC,EAAE;MACnCI,MAAM,CAACC,IAAI,CAAC;QAAE,GAAGrB,KAAK,CAACY,CAAC,GAAG,CAAC;MAAE,CAAC,CAAC;MAChCI,CAAC,IAAIH,MAAM,GAAGC,KAAK;IACrB,CAAC,MAAM,IAAIN,KAAK,CAACI,CAAC,CAAC,CAACI,CAAC,CAAC,KAAKR,KAAK,CAACI,CAAC,GAAG,CAAC,CAAC,CAACI,CAAC,CAAC,IAAIF,KAAK,IAAI,CAAC,EAAE;MACxDM,MAAM,CAACC,IAAI,CAAC;QAAE,GAAGrB,KAAK,CAACY,CAAC,GAAG,CAAC,CAAC;QAAEE,KAAK,EAAE;MAAE,CAAC,CAAC;IAC5C;IACAF,CAAC,IAAI,CAAC;EACR;EAEA,OAAOQ,MAAM,CAACE,OAAO,EAAE;AACzB,CAAC;AAED,eAAevB,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}